
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="By default, the Platfora application allows you to connect the the Hive Thrift Metastore service. To use the Thrift server as a data source for Platfora, you must start the Hive Thrift Metastore ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="task"/><meta name="DC.Title" content="Connecting to a Hive Thrift Metastore"/><meta name="abstract" content="By default, the Platfora application allows you to connect the the Hive Thrift Metastore service. To use the Thrift server as a data source for Platfora, you must start the Hive Thrift Metastore server in your Hadoop environment and know the URI to connect to this server."/><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="By default, the Platfora application allows you to connect the the Hive Thrift Metastore service. To use the Thrift server as a data source for Platfora, you must start the Hive Thrift Metastore server in your Hadoop environment and know the URI to connect to this server."/><meta name="DC.Relation" scheme="URI" content="../data_source/add_hive_datasource.html"/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="add_hive_datasource_thrift"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Connecting to a Hive Thrift Metastore</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/jquery.realperson.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/comments.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/jquery.cleditor.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/admin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/localization/strings.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/init.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/comments-functions.js"><!----></script></head>
<body onload="init('../')" id="add_hive_datasource_thrift">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="printThisPage"/></div><div id="permalink"><a href="#" title="linkToThis"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../data_source/../data_source/add_datasource.html" title="A data source is a connection to a mount point or directory on an external data server, such as a file system or database server. Platfora currently provides data source adapters for Hiveï»¿, HDFS, Amazon S3, and MapR FS.">Add a New Data Source</a> / <a class="navheader_parent_path" href="../data_source/add_hive_datasource.html" title="When Platfora uses Hive as a data source, it connects to the Hive metastore to query information about the source data. There are multiple ways to configure the Hive metastore service in your Hadoop environment. If you are using the Hive Thrift Metastore (known as the remote metastore client configuration), you can add a Hive data source directly in the Platfora application.">Connect to a Hive Data Source</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../data_source/add_hive_datasource.html" title="When Platfora uses Hive as a data source, it connects to the Hive metastore to query information about the source data. There are multiple ways to configure the Hive metastore service in your Hadoop environment. If you are using the Hive Thrift Metastore (known as the remote metastore client configuration), you can add a Hive data source directly in the Platfora application."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Connect to a Hive Data Source</span></a></span>  </div></td></tr></tbody></table>

    <h1 class="title topictitle1">Connecting to a Hive Thrift Metastore</h1>

    
    <div class="body taskbody"><p class="shortdesc">By default, the Platfora application allows you to connect the the <dfn class="term">Hive Thrift
            Metastore</dfn> service. To use the Thrift server as a data source for Platfora, you
        must start the Hive Thrift Metastore server in your Hadoop environment and know the URI to
        connect to this server.</p>

        <div class="section context">
            <p class="p">In a remote Hive metastore setup, Hive clients (such as Platfora) make a connection
                to the Hive Thrift Metastore server which then queries the metastore database
                (typically a MySQL database) for the Hive metadata. The client and metastore server
                communicate using the Thrift protocol.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Adding a Hive Thrift Metastore Datasource </h2>
            
            <p class="p">You can add a Hive Thrift Metastore data source in the Platfora application. You will
                need to supply the URI to the Hive Thrift metastore service in the format of:</p>

            <div class="p">
                <pre class="pre codeblock">thrift://<var class="keyword varname">hive_host</var>:<var class="keyword varname">thrift_port</var></pre>

            </div>

            <p class="p">Where <var class="keyword varname">hive_host</var> is the DNS host name or IP address of the Hive
                server, and <var class="keyword varname">thrift_port</var> is the port that the Hive Thrift
                metastore service is listening on. For Cloudera 4, Hortonworks 1.2, and MapR
                installations the default Thrift port is 9083. For Hortonworks 2 installations, it
                is 9983.</p>

            <div class="p">
                <div class="fig fignone"><img class="image" src="../images/./data_source/datasource_hive_thrift.png" alt="connect to Hive data source"/>
                    
                </div>

            </div>

            
            <p class="p">If the connection to Hive is successful, you will see a list of available databases
                when defining a dataset from the data source. Clicking on a database name, will show
                the Hive tables within that database. The default database in Hive is named
                    <em class="ph i">default</em>. If you have not created your own databases in Hive, this is
                where all of your tables will reside. </p>

            <div class="p">
                <div class="fig fignone"><img class="image" src="../images/./data_source/datasource_hive.png" alt="connect to Hive data source"/>
                    
                </div>

            </div>

            <p class="p">If you have trouble connecting to Hive, make sure that the Hive <em class="ph i">Thrift</em>
                metastore server process is running, and that the Platfora server machine has access
                over the network to the designated Hive Thrift server port. Also, make sure that the
                system user that the Platfora server runs as has read permissions to the underlying
                data files in HDFS.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">How Do I Know if the Hive Thrift Metastore Server is Running?</h2>
            
            <p class="p">The Hive Thrift metastore is an optional service and is not usually started by
                default when you install Hive, so it is possible that the service is not started. To
                check if Platfora can connect to the Hive Thrift Metastore, run the following
                command from the Platfora master server:</p>

            <div class="p">
                <pre class="pre codeblock"><samp class="ph systemoutput">$</samp> <kbd class="ph userinput">hive --hiveconf hive.metastore.uris="thrift://<var class="keyword varname">your_hive_server</var>:<var class="keyword varname">9083</var>" --hiveconf hive.metastore.local=false</kbd></pre>

            </div>

            <p class="p">Make sure the Hive server host name or IP address and Thrift port is correct for your
                Hadoop installation. For Cloudera 4, Hortonworks 1.2, and MapR installations the
                default Thrift port is 9083. For Hortonworks 2 installations, it is 9983.</p>

            <p class="p">If the Platfora server can connect, you should see the Hive console command prompt
                and be able to query the Hive metastore. For example: </p>

            <div class="p">
                <pre class="pre codeblock"><samp class="ph systemoutput">hive&gt;</samp> <kbd class="ph userinput">SHOW DATABASES; </kbd>
<samp class="ph systemoutput">hive&gt;</samp> <kbd class="ph userinput">exit;</kbd></pre>

            </div>

            <p class="p">If you cannot connect, it is possible that your Hive Thrift Metastore service is not
                running. Depending on the Hadoop distribution you are using and the version of Hive
                server you are running, there are different ways to start the Hive Thrift metastore.
                For example, run the following command on the server where Hive is installed: </p>

            <div class="p">
                <pre class="pre codeblock"><samp class="ph systemoutput">$</samp> <kbd class="ph userinput">sudo hive --service metastore</kbd></pre>

            </div>

            <p class="p">or</p>

            <div class="p">
                <pre class="pre codeblock">$ <kbd class="ph userinput">sudo hive --service hiveserver2</kbd></pre>

            </div>

            <p class="p">Check on your Hive server to make sure it is started, and view you Hive server logs
                for any issues with starting the metastore. </p>

        </div>

    </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../data_source/add_hive_datasource.html" title="When Platfora uses Hive as a data source, it connects to the Hive metastore to query information about the source data. There are multiple ways to configure the Hive metastore service in your Hadoop environment. If you are using the Hive Thrift Metastore (known as the remote metastore client configuration), you can add a Hive data source directly in the Platfora application."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Connect to a Hive Data Source</span></a></span>  </div><div class="footer">WebHelp output generated by<a href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"/></span><span class="xmlauthor">XML Author</span></a></div>
<div id="productInfo" style="display:none;"><span id="oxy_productID">webhelp</span><span id="oxy_productVersion">3.0</span></div><div id="loginData" style="display: none"><span class="bt_close" title="Close"><!----></span><form action="" target="passwordIframe" method="post" name="form_login" onsubmit="return loggInUser();" id="loginFormData" autocomplete="on"><input type="hidden" id="reloadComments" value="yes"><!----></input><table class="login"><thead><tr><td colspan="2"><span id="l_login2"><script type="text/javascript">$('#l_login2').html(getLocalization('label.login'));</script></span></td></tr><tr><td colspan="2"><div id="loginResponse"><!----></div></td></tr></thead><tr><td><span id="l_userName"><script type="text/javascript">$('#l_userName').html(getLocalization('label.userName'));</script></span></td><td><input name="usernameW" type="text" id="myUserName" autocomplete="on" required="required" autofocus="autofocus"><!----></input></td></tr><tr><td><span id="l_pswd"><script type="text/javascript">$('#l_pswd').html(getLocalization('label.pswd'));</script></span></td><td><input name="passwordW" type="password" id="myPassword" autocomplete="on" required="required"><!----></input></td></tr><tr><td colspan="2" align="left"><span id="ll_remember"><script type="text/javascript" xml:space="preserve">
								$('#ll_remember').html(getLocalization('label.rememberme'));
							</script></span> Â Â Â  <input name="myLoginRemember" type="checkbox" class="ck" id="myRemember" value="no"><!----></input></td></tr><tr><td colspan="2" align="center"><input id="l_bt_submit_log" type="submit" value="Submit" name="loginFormButton"><!----></input><script type="text/javascript">$('#l_bt_submit_log').attr('value',getLocalization('label.login'));</script><span class="btnHGlue"><!----></span><input class="bt_cancel" id="l_cancelLog" type="button" value="Cancel" name="loginFormButton"><!----></input><script type="text/javascript">$('#l_cancelLog').attr('value',getLocalization('label.cancel'));</script></td></tr></table><div class="loginAlternative"><span id="link_lostPwd" onclick="showLostPwd()"><script type="text/javascript">$('#link_lostPwd').html(getLocalization('label.lostPswd'));</script></span><span id="link_signUp" onclick="showSignUp()"><script type="text/javascript">$('#link_signUp').html(getLocalization('label.signUp'));</script></span></div></form><iframe id="passwordIframe" name="passwordIframe" style="display:none"><!----></iframe></div><div id="cmts"><!----></div></body>
</html>