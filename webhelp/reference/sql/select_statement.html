
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Queries an aggregate lens. A SELECT statement is input to a progammatic lens query. Syntax [ DEFINE alias-name AS expression [ DEFINE ... ] ] SELECT measure-column [ AS alias-name ] | ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="reference"/><meta name="DC.Title" content="SELECT Statement"/><meta name="abstract" content="Queries an aggregate lens. A SELECT statement is input to a progammatic lens query."/><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Queries an aggregate lens. A SELECT statement is input to a progammatic lens query."/><meta name="DC.Relation" scheme="URI" content="../../reference/expression_language/expression_reference_top.html"/><meta name="DC.Relation" scheme="URI" content="../../reference/sql/define_clause.html"/><meta name="DC.Relation" scheme="URI" content="../../reference/sql/where_clause.html"/><meta name="DC.Relation" scheme="URI" content="../../reference/sql/group_by_clause.html"/><meta name="DC.Relation" scheme="URI" content="../../reference/sql/having_clause.html"/><meta name="DC.Relation" scheme="URI" content="../../reference/sql/sql_examples.html"/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="select_statement"/><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>SELECT Statement</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/jquery.realperson.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/comments.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/jquery.cleditor.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/admin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/localization/strings.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/init.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/comments-functions.js"><!----></script></head>
<body onload="init('../../')" id="select_statement">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="printThisPage"/></div><div id="permalink"><a href="#" title="linkToThis"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../../reference/expression_language/expression_reference_top.html" title="An expression computes or produces a value by combining fields (or columns), constant values, operators, and functions. Platfora has a built-in expression language. You use the language's functions and operators to create a computed field.">Expression and Query Language Reference</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../../reference/expression_language/expression_reference_top.html" title="An expression computes or produces a value by combining fields (or columns), constant values, operators, and functions. Platfora has a built-in expression language. You use the language's functions and operators to create a computed field."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Expression and Query Language Reference</span></a></span>  </div></td></tr></tbody></table>

  <h1 class="title topictitle1">SELECT Statement</h1>

  
  <div class="body refbody"><p class="shortdesc">Queries an aggregate lens. A <samp class="ph codeph">SELECT</samp> statement is input to a progammatic lens query.</p>

    <div class="section refsyn"><h2 class="title sectiontitle">Syntax</h2>
      
      <div style="display: block; border: 1 black solid; padding: 2pt; color: maroon; margin-bottom: 6pt;">
         
          <kbd class="ph delim">[</kbd>
          <kbd><b>DEFINE</b></kbd>
          <var>alias-name</var>
          <kbd><b>AS</b></kbd>
          <var>expression</var>
          <kbd class="ph delim"> [ </kbd>
          <kbd><b>DEFINE</b></kbd>
          <kbd class="ph delim"> ... ]  ]</kbd>
         
         
          <kbd><b>SELECT</b></kbd>
          <var>measure-column</var>
          <kbd class="ph delim"> [ </kbd>
            <kbd><b>AS</b></kbd> <var>alias-name</var>
            <kbd class="ph delim">]</kbd> <kbd class="ph delim">|</kbd>
          <var>measure-expression</var> 
          <kbd><b>AS</b></kbd> <var>alias-name</var>
           
          <kbd class="ph delim"> [ ,</kbd>
           { 
            <var>column</var>
               | <kbd class="ph delim"> [ </kbd>
              <kbd><b> | AS</b></kbd> <var> | alias-name</var>
               | <kbd class="ph delim">]</kbd>  | <kbd class="ph delim">|</kbd>
              <var> | expression</var> 
              <kbd><b> | AS</b></kbd> <var> | alias-name</var> 
           } 
          <kbd class="ph delim"> [ , ...] ]</kbd>
           
         
         
          <kbd><b>FROM</b></kbd>
          <var>lens-name</var>
         
         
          <kbd class="ph sep">[</kbd>
          <kbd><b>WHERE</b></kbd>
          <var>predicate-expression</var>
          <kbd class="ph sep"> [ </kbd>
          <kbd><b>AND</b></kbd>
          <var>predicate-expression</var>
          <kbd class="ph sep">]</kbd>
          <kbd class="ph sep">]</kbd>
         
         
          <kbd class="ph sep">[</kbd>
          <kbd><b>GROUP BY</b></kbd>
          <var>column-name</var>
          <kbd class="ph sep">[</kbd>
          <kbd class="ph sep">[,</kbd>
          <var>group-ordering</var>
          <kbd class="ph sep">] ]</kbd>
         
         
          <kbd class="ph sep">[</kbd>
          <kbd><b>HAVING</b></kbd>
          <var>measure-predicate-expression</var>
          <kbd class="ph sep">]</kbd>
         
      </div>
    </div>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p">Use <samp class="ph codeph">SELECT</samp> to query an aggregate lens. You cannot query an event series lens. The <samp class="ph codeph">SELECT</samp> must include at least one measure field (column) or expression.  Once you've supplied a measure value, your <samp class="ph codeph">SELECT</samp> can contain
        additional measures or dimensions.</p>

      <p class="p">If you include non-measure columns in the <samp class="ph codeph">SELECT</samp>, you must include those columns in a <samp class="ph codeph">GROUP BY</samp> clause. Use the <samp class="ph codeph">DEFINE</samp> clause to add one or more computed fields to the lens.</p>
  
      <p class="p">Platfora always queries the current version of the <var class="keyword varname">lens-name</var>. Keep in mind lens definitions can change. If you write a query against a column that is later dropped from the lens, a previously working query can fail as a result and return an error
        message.</p>

    </div>

    <div class="section"><h2 class="title sectiontitle">Querying via REST</h2>
      
      <p class="p">A lens query is meant to support external applications that want to access Platfora lens data. For this reason, you query a lens by making API calls to the <samp class="ph codeph">query</samp> REST resource:</p>

      <pre class="pre codeblock">https://<var class="keyword varname">hostname</var>:<var class="keyword varname">port</var>/api/v1/query</pre>

      <p class="p">The resource supports passing the statement as a <samp class="ph codeph">GET</samp> or <samp class="ph codeph">POST</samp> with <samp class="ph codeph">application/x-www-form-urlencoded</samp> URL/form parameters.  The caller must authenticate as a user with the <span class="ph uicontrol">Analyst (Limited)</span> role or
        higher to execute a query. To query a specific lens, the caller must have <span class="ph uicontrol">Data Access</span> on all datasets the lens references. </p>

      <p class="p">A query returns comma separated values (CSV) by default.  You have the option of receiving the results in a JSON body.  For detailed information about using this REST APIs, see the <cite class="cite">Platfora API Reference</cite>.</p>

    </div>

    <div class="section"><h2 class="title sectiontitle">Writing a SELECT Expression</h2>
      
      <p class="p">The <samp class="ph codeph">SELECT</samp> expression can contain multiple columns and or expressions. You must specify at least one measure column or measure expression. Once you meet this requirement, you can include additional dimension columns or row expressions. Recall that a
        measure is a aggregate numeric value where as a dimension is a numeric, text, or time-based. </p>

     
      <div class="p">A measure expression supports addition, subtraction, multiplication, and division. Inputs values can be column references (fields) or expressions that contain any of these supported functions: <ul class="ul">
          <li class="li">aggregate ( that is, <samp class="ph codeph">AVG()</samp>, <samp class="ph codeph">COUNT()</samp>, <samp class="ph codeph">SUM()</samp> and so forth</li>

          <li class="li"><samp class="ph codeph">ROLLUP()</samp></li>

          <li class="li"><samp class="ph codeph">EXP()</samp></li>

          <li class="li"><samp class="ph codeph">POW()</samp></li>

          <li class="li"><samp class="ph codeph">SQRT()</samp>
          </li>

        </ul>

      </div>

      <p class="p">Measure expressions can also include literal (integers or string) values. When constructing a measure expression, make sure you understand the expression syntax rules and limitations of aggregate functions. See the <cite class="cite">Expression and Query Language Reference</cite> for
        information on the aggregate function limitations and expression syntax.</p>

      <p class="p">If the <samp class="ph codeph">SELECT</samp> statement includes a dimension value, you must include the column in your <samp class="ph codeph">GROUP BY</samp> clause.  A dimension or row expression supports addition, subtraction, multiplication, and division of row values.  Your
          <samp class="ph codeph">SELECT</samp> can reference columns or supply row expressions that include following functions:</p>

      <ul class="ul">
        <li class="li">data type conversion</li>

        <li class="li">date and time </li>

        <li class="li">general processing</li>

        <li class="li">math </li>

        <li class="li">string</li>

        <li class="li">URL</li>

      </ul>

      <p class="p">An expression can include literal (integers or string) values or other expressions. Make sure you understand the expression syntax rules.  See the <cite class="cite">Expression and Query Language Reference</cite> for information on the expression syntax.</p>

     
      <div class="note note"><span class="notetitle">Note:</span> When specifying an expression, supply an alias (<samp class="ph codeph">AS</samp> clause) if you want to refer to the expression elsewhere in other clauses. You cannot use an * (asterisk) to retrieve all of the rows in a lens.</div>

    </div>

    <div class="section"><h2 class="title sectiontitle">Specifying Lens and Column Names</h2>
      
      <p class="p">When you specify the <var class="keyword varname">lens-name</var> you use the name as it appears in the <span class="ph uicontrol">Data Catalog</span> user interface. Enclose the name in [ ] (brackets) if it contains spaces or special characters. For example, you would refer to the <samp class="ph codeph">Web
          Log-2014</samp> lens as:</p>
<pre class="pre codeblock">[Web Log-2014]</pre>
<p class="p">When specifying a column name, you should follow the expression language rules for field (column) references. This means that for columns belonging to a reference dataset, you must qualify the name
        using dot-notation as follows:</p>
<div style="display: block; border: 1 black solid; padding: 2pt; color: maroon; margin-bottom: 6pt;">
         { 
          <kbd class="ph sep">[</kbd>
          <var> | reference-dataset</var>
           | <kbd class="ph sep">. [...] ]</kbd>
          <var> | column-name</var>
           | <kbd class="ph delim">|</kbd>
          <var> | alias-name</var>
         } 
      </div>
      <p class="p">For example, use <samp class="ph codeph">device.manufacturer</samp> to refer the <samp class="ph codeph">manufacturer</samp> column in the <samp class="ph codeph">device</samp> dataset. If you define an alias, use the alias to refer to the column in other parts of your query.</p>
 </div>

  </div>

<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="../../reference/sql/define_clause.html">DEFINE Clause</a></strong><br/>
Defines a computed field to include in a SELECT statement.</li>
<li class="link ulchildlink"><strong><a href="../../reference/sql/where_clause.html">WHERE Clause</a></strong><br/>
Filters a lens query by one or more  predicate expression.</li>
<li class="link ulchildlink"><strong><a href="../../reference/sql/group_by_clause.html">GROUP BY Clause</a></strong><br/>
Orders and optionally limit the results of a <samp class="ph codeph">SELECT</samp> statement.</li>
<li class="link ulchildlink"><strong><a href="../../reference/sql/having_clause.html">HAVING Clause</a></strong><br/>
Filters a <samp class="ph codeph">SELECT</samp> statement by a measure expression. </li>
<li class="link ulchildlink"><strong><a href="../../reference/sql/sql_examples.html">Example of Lens Queries</a></strong><br/>
This section provides some tips and examples for querying a lens. </li>
</ul>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../reference/expression_language/expression_reference_top.html" title="An expression computes or produces a value by combining fields (or columns), constant values, operators, and functions. Platfora has a built-in expression language. You use the language's functions and operators to create a computed field."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Expression and Query Language Reference</span></a></span>  </div><div class="footer">WebHelp output generated by<a href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"/></span><span class="xmlauthor">XML Author</span></a></div>
<div id="productInfo" style="display:none;"><span id="oxy_productID">webhelp</span><span id="oxy_productVersion">3.0</span></div><div id="loginData" style="display: none"><span class="bt_close" title="Close"><!----></span><form action="" target="passwordIframe" method="post" name="form_login" onsubmit="return loggInUser();" id="loginFormData" autocomplete="on"><input type="hidden" id="reloadComments" value="yes"><!----></input><table class="login"><thead><tr><td colspan="2"><span id="l_login2"><script type="text/javascript">$('#l_login2').html(getLocalization('label.login'));</script></span></td></tr><tr><td colspan="2"><div id="loginResponse"><!----></div></td></tr></thead><tr><td><span id="l_userName"><script type="text/javascript">$('#l_userName').html(getLocalization('label.userName'));</script></span></td><td><input name="usernameW" type="text" id="myUserName" autocomplete="on" required="required" autofocus="autofocus"><!----></input></td></tr><tr><td><span id="l_pswd"><script type="text/javascript">$('#l_pswd').html(getLocalization('label.pswd'));</script></span></td><td><input name="passwordW" type="password" id="myPassword" autocomplete="on" required="required"><!----></input></td></tr><tr><td colspan="2" align="left"><span id="ll_remember"><script type="text/javascript" xml:space="preserve">
								$('#ll_remember').html(getLocalization('label.rememberme'));
							</script></span>     <input name="myLoginRemember" type="checkbox" class="ck" id="myRemember" value="no"><!----></input></td></tr><tr><td colspan="2" align="center"><input id="l_bt_submit_log" type="submit" value="Submit" name="loginFormButton"><!----></input><script type="text/javascript">$('#l_bt_submit_log').attr('value',getLocalization('label.login'));</script><span class="btnHGlue"><!----></span><input class="bt_cancel" id="l_cancelLog" type="button" value="Cancel" name="loginFormButton"><!----></input><script type="text/javascript">$('#l_cancelLog').attr('value',getLocalization('label.cancel'));</script></td></tr></table><div class="loginAlternative"><span id="link_lostPwd" onclick="showLostPwd()"><script type="text/javascript">$('#link_lostPwd').html(getLocalization('label.lostPswd'));</script></span><span id="link_signUp" onclick="showSignUp()"><script type="text/javascript">$('#link_signUp').html(getLocalization('label.signUp'));</script></span></div></form><iframe id="passwordIframe" name="passwordIframe" style="display:none"><!----></iframe></div><div id="cmts"><!----></div></body>
</html>